(this.webpackJsonpstatic=this.webpackJsonpstatic||[]).push([[0],{28:function(e,t,a){},30:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(20),r=a.n(c),i=(a(28),a(3)),o=a(4),l=a.n(o),j=a(8),b=a(7),u=a(2),d=(a(30),a(6)),h=a(23),m=a(0),p=["isAuth"];var O=function(e){var t=e.isAuth,a=Object(h.a)(e,p);return t?Object(m.jsx)(u.b,Object(d.a)({},a)):Object(m.jsx)(u.a,{to:"/login"})};var x=function(e){return Object(m.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("a",{className:"navbar-brand",href:"/",children:"Cat News App"}),Object(m.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(m.jsx)("span",{className:"navbar-toggler-icon"})}),Object(m.jsx)("div",{className:"collapse navbar-collapse",id:"navbarResponsive",children:Object(m.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{to:"/",children:"Home"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{to:"/",children:"Profile"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{to:"/login",children:"Login"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{to:"/registration",children:"Register"})}),e.isAuth&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{to:"/articles/create",children:"Submit Article"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{to:"/articles/myarticles",children:"My Articles"})})]})]})})]})})},f=a(12),v=a(13),g=a.n(v);var y=Object(u.i)((function(e){var t=Object(n.useState)({username:"",email:"",password1:"",password2:""}),a=Object(b.a)(t,2),s=a[0],c=a[1],r=Object(n.useState)(null),i=Object(b.a)(r,2),o=(i[0],i[1]);function h(e){var t=e.target,a=t.name,n=t.value;c((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(f.a)({},a,n))}))}function p(e){console.warn(e)}function O(){return(O=Object(j.a)(l.a.mark((function t(a){var n,c,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),s.password1===s.password2){t.next=5;break}o("Passwords do not match."),t.next=19;break;case 5:return n={method:"POST",headers:{"Content-Type":"application/json","X-CSFRToken":g.a.get("csfrtoken")},body:JSON.stringify(s)},t.next=8,fetch("/rest-auth/registration/",n).catch(p);case 8:if(c=t.sent){t.next=13;break}console.log(c),t.next=19;break;case 13:return t.next=15,c.json();case 15:r=t.sent,g.a.set("Authorization","Token ".concat(r.key)),e.setIsAuth(!0),e.history.push("/");case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return e.isAuth?Object(m.jsx)(u.a,{to:"/"}):Object(m.jsxs)("form",{className:"mt-3 col-6",onSubmit:function(e){return O.apply(this,arguments)},children:[Object(m.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(m.jsx)("label",{htmlFor:"username",children:"Username"}),Object(m.jsx)("input",{type:"text",className:"form-control",id:"username",placeholder:"Enter Username",onChange:h,required:!0,name:"username",value:s.username})]}),Object(m.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(m.jsx)("label",{htmlFor:"email",children:"Email"}),Object(m.jsx)("input",{type:"email",className:"form-control",id:"email",placeholder:"Enter Email",onChange:h,required:!0,name:"email",value:s.email})]}),Object(m.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(m.jsx)("label",{htmlFor:"password1",children:"Password"}),Object(m.jsx)("input",{type:"password",className:"form-control",id:"password1",placeholder:"Enter Password",onChange:h,required:!0,name:"password1",value:s.password1})]}),Object(m.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(m.jsx)("label",{htmlFor:"password2",children:"Confirm Password"}),Object(m.jsx)("input",{type:"password",className:"form-control",id:"password2",placeholder:"Confirm Password",onChange:h,required:!0,name:"password2",value:s.password2})]}),Object(m.jsx)("button",{type:"submit",className:"btn btn-primary mt-3",children:"Register"})]})}));var w=Object(u.i)((function(e){var t=Object(n.useState)({username:"",password:""}),a=Object(b.a)(t,2),s=a[0],c=a[1];function r(e){var t=e.target,a=t.name,n=t.value;c((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(f.a)({},a,n))}))}function i(e){console.warn(e)}function o(){return(o=Object(j.a)(l.a.mark((function t(a){var n,c,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n={method:"POST",header:{"Content-Type":"applicatoin/json","X-CSRFToken":g.a.get("csrftoken")},body:JSON.stringify(s)},t.next=4,fetch("/rest-auth/login/",n).catch(i);case 4:if(c=t.sent){t.next=9;break}console.log(c),t.next=15;break;case 9:return t.next=11,c.json();case 11:r=t.sent,g.a.set("Authorization","Token ".concat(r.key)),e.setIsAuth(!0),e.history.push("/");case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return e.isAuth?Object(m.jsx)(u.a,{to:"/"}):Object(m.jsxs)("form",{className:"mt-3 col-6",onSubmit:function(e){return o.apply(this,arguments)},children:[Object(m.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(m.jsx)("label",{htmlFor:"username",children:"Username"}),Object(m.jsx)("input",{type:"text",className:"form-control",id:"username",placeholder:"Enter Username",onChange:r,required:!0,name:"username",value:s.username})]}),Object(m.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(m.jsx)("label",{htmlFor:"password",children:"Password"}),Object(m.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter Password",onChange:r,required:!0,name:"password",value:s.password})]}),Object(m.jsx)("button",{type:"submit",className:"btn btn-success",children:"Login"})]})}));var N=Object(u.i)((function(e){var t=Object(n.useState)({alias:"",avatar:null}),a=Object(b.a)(t,2),s=a[0],c=a[1],r=Object(n.useState)(""),i=Object(b.a)(r,2),o=i[0],u=i[1];function h(e){console.warn(Error)}function p(){return(p=Object(j.a)(l.a.mark((function t(a){var n,c,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),(n=new FormData).append("alias",s.alias),n.append("avatar",s.avatar),c={method:"POST",headers:{"X-CSRFToken":g.a.get("csrftoken")},body:n},t.next=7,fetch("/api_v1/accounts/",c).catch(h);case 7:if(r=t.sent){t.next=12;break}console.log(r),t.next=16;break;case 12:return t.next=14,r.json();case 14:t.sent,e.history.push("/");case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(m.jsx)("div",{className:"ProfileForm",children:Object(m.jsxs)("form",{onSubmit:function(e){return p.apply(this,arguments)},children:[Object(m.jsx)("input",{type:"text",name:"alias",value:s.alias,onChange:function(e){var t=e.target,a=t.name,n=t.value;c(Object(d.a)(Object(d.a)({},s),{},Object(f.a)({},a,n)))}}),Object(m.jsx)("input",{type:"file",name:"avatar",onChange:function(e){var t=e.target.files[0];c(Object(d.a)(Object(d.a)({},s),{},{avatar:t}));var a=new FileReader;a.onloadend=function(){u(a.result)},a.readAsDataURL(t)}}),s.avatar&&Object(m.jsx)("img",{src:o,alt:""}),Object(m.jsx)("button",{type:"submit",children:"Save Profile"})]})})}));var S=Object(u.i)((function(e){var t=Object(n.useState)({image:null,title:"",body:"",category:""}),a=Object(b.a)(t,2),s=a[0],c=a[1],r=Object(n.useState)(""),i=Object(b.a)(r,2),o=i[0],u=i[1],h=function(e){var t=e.target,a=t.name,n=t.value;c(Object(d.a)(Object(d.a)({},s),{},Object(f.a)({},a,n)))};function p(e){console.warn(e)}function O(){return(O=Object(j.a)(l.a.mark((function t(a){var n,c,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),(n=new FormData).append("image",s.image),n.append("title",s.title),n.append("body",s.body),n.append("category",s.category),c={method:"POST",headers:{"X-CSRFToken":g.a.get("csrftoken")},body:n},t.next=9,fetch("/api_v1/articles/",c).catch(p);case 9:if(r=t.sent){t.next=14;break}console.log(r),t.next=18;break;case 14:return t.next=16,r.json();case 16:t.sent,e.history.push("/");case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(m.jsxs)("form",{className:"mt-3 col-6",onSubmit:function(e){return O.apply(this,arguments)},children:[Object(m.jsxs)("div",{className:"form-group text-left mb-2",children:[Object(m.jsx)("label",{htmlFor:"image",children:"Image"}),Object(m.jsx)("input",{type:"file",name:"image",onChange:function(e){var t=e.target.files[0];c(Object(d.a)(Object(d.a)({},s),{},{image:t}));var a=new FileReader;a.onloadend=function(){u(a.result)},a.readAsDataURL(t)}}),Object(m.jsx)("img",{src:o,alt:""})]}),Object(m.jsxs)("div",{className:"form-group text-left mb-2",children:[Object(m.jsx)("label",{htmlFor:"title",children:"Title"}),Object(m.jsx)("input",{type:"text",name:"title",value:s.title,onChange:h})]}),Object(m.jsxs)("div",{className:"form-group text-left mb-2",children:[Object(m.jsx)("label",{htmlFor:"body",children:"Body"}),Object(m.jsx)("input",{type:"text",name:"body",value:s.body,onChange:h})]}),Object(m.jsxs)("select",{onChange:h,name:"category",value:s.category,children:[Object(m.jsx)("option",{children:"Open selection menu"}),Object(m.jsx)("option",{value:"NEWS",children:"Cat Mews"}),Object(m.jsx)("option",{value:"VET",children:"Veterinarian"}),Object(m.jsx)("option",{value:"TOYS",children:"Cat Toys"}),Object(m.jsx)("option",{value:"RNDM",children:"Random Cat Thoughts"})]}),Object(m.jsx)("button",{type:"submit",children:"Save as Edit"}),Object(m.jsx)("button",{type:"submit",children:"Submit for Publication"})]})})),k={draft:"DFT",submitted:"SUBM",published:"PUBL",rejected:"REJ"};var C=Object(u.i)((function(e){var t=Object(n.useState)([]),a=Object(b.a)(t,2),s=a[0],c=a[1];Object(n.useEffect)((function(){var t=e.match.params.status,a="/api_v1/articles/?status=ALL";function n(){return(n=Object(j.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a);case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,c(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&(a="/api_v1/articles/?status=".concat(k[t])),function(){n.apply(this,arguments)}()}),[]);var r=s.map((function(e){return Object(m.jsxs)("div",{className:"article",children:[Object(m.jsx)("img",{className:"fit-picture",src:e.image,alt:""}),Object(m.jsx)("h3",{children:e.title}),Object(m.jsx)("p",{children:e.body}),Object(m.jsx)("p",{children:e.status})]},e.id)}));return Object(m.jsx)(m.Fragment,{children:r})}));var F=Object(u.i)((function(e){var t=Object(n.useState)([]),a=Object(b.a)(t,2),s=a[0],c=a[1],r=Object(u.h)(),o={cat_mews:"NEWS",veterinarian:"VET",cat_toys:"TOYS",random:"RNDM"};Object(n.useEffect)((function(){var t=e.match.params.category,a="/api_v1/articles/";function n(){return(n=Object(j.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a);case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,console.log("articles",n),c(n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&(a="/api_v1/articles/?category=".concat(o[t])),function(){n.apply(this,arguments)}()}),[r]);var d=s.map((function(e){return Object(m.jsxs)("div",{className:"article",children:[Object(m.jsx)("img",{className:"fit-picture",src:e.image,alt:""}),Object(m.jsx)("h3",{children:e.title}),Object(m.jsx)("p",{children:e.username}),Object(m.jsx)("p",{children:e.body})]},e.id)}));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{className:"home-header",children:"Local Alley Cat Mews"}),Object(m.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(m.jsx)("div",{className:"container d-flex justify-content-center",children:Object(m.jsxs)("ul",{className:"navbar-nav",id:"secondary-nav",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{to:"/cat_mews",children:"Cat Mews"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{to:"/veterinarian",children:"Vet"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{to:"/cat_toys",children:"Toys"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{to:"/random",children:"Random Cat Thoughts"})})]})})}),Object(m.jsx)("section",{className:"article-section",children:d})]})}));var T=Object(u.i)((function(){var e=Object(n.useState)(null),t=Object(b.a)(e,2),a=t[0],s=t[1],c=Object(u.g)();return Object(n.useEffect)((function(){var e=function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/rest-auth/user/");case 2:e.sent.ok?s(!0):s(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[c]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(x,{isAuth:a}),Object(m.jsxs)(u.d,{children:[Object(m.jsx)(u.b,{path:"/registration",children:Object(m.jsx)(y,{isAuth:a,setIsAuth:s})}),Object(m.jsx)(u.b,{path:"/login",children:Object(m.jsx)(w,{isAuth:a,setIsAuth:s})}),Object(m.jsx)(O,{path:"/profile",isAuth:a,children:Object(m.jsx)(N,{})}),Object(m.jsx)(O,{path:"/articles/create",isAuth:a,children:Object(m.jsx)(S,{})}),Object(m.jsx)(O,{path:"/articles/myarticles/:status?",isAuth:a,children:Object(m.jsx)(C,{})}),Object(m.jsx)(u.b,{path:"/:category?",children:Object(m.jsx)(F,{})})]})]})})),A=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,38)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};r.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(i.a,{children:Object(m.jsx)(T,{})})}),document.getElementById("root")),A()}},[[37,1,2]]]);
//# sourceMappingURL=main.6380ac19.chunk.js.map